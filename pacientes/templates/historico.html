{% extends "base.html" %}
{% load static %}
{% block datepicker %}
  <script src ="{% static "tables/jquery.min.js" %}"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
{% endblock datepicker %}
{% block menu_li %}
  <li class="nav-item">
      <a class="nav-link" href="{% url 'home' %}">
        <i class="material-icons">dashboard</i>
        <p>Dashboard</p>
      </a>
    </li>
  <li class="nav-item active  ">
    <a class="nav-link" href="{% url 'lista_pacientes' %}">
    <i class="material-icons">accessible</i>
      <p>Pacientes</p>
    </a>
  </li>
{% endblock menu_li %}
{% block navbar %}
   <h4><b>&nbsp;&nbsp;{{paciente.nome|upper}}</b></h4>
{% endblock navbar %}
{% block container %}
  <div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div>
                  <ul class="nav nav-tabs" data-tabs="tabs"data-background-color="green">
                    <li class="active">
                        <a href="#timeline" role="tab"data-toggle="tab"aria-expanded="false">
                            <i class="material-icons">show_chart</i> Linha do Tempo
                        </a>
                    </li>
                    <li class="">
                        <a href="#evolucoes" role="tab" data-toggle="tab" aria-expanded="false">
                             <i class="material-icons">person_pin</i> Evoluções
                        </a>
                    </li>
                    <li class="">
                        <a href="#prontuario" role="tab" data-toggle="tab" aria-expanded="true">
                          <i class="material-icons">dns</i> Prontuario
                        </a>
                    </li>
                    <li class="">
                        <a href="#dados" role="tab" data-toggle="tab" aria-expanded="true">
                          <i class="material-icons">dns</i> Dados
                        </a>
                    </li>
                </ul>              
              </div>
              <div class="card-content">
              <div class="tab-content">
                  <div class="tab-pane" id="evolucoes">
                    <div class="tab-pane">
                 <div class="row">
                  <style>
                    ul.timelinep {
                      list-style-type: none;
                      position: relative;
                    }
                    ul.timelinep:before {
                        content: ' ';
                        background: #d4d9df;
                        display: inline-block;
                        position: absolute;
                        left: 29px;
                        width: 2px;
                        height: 100%;
                        z-index: 400;
                    }
                    ul.timelinep > li {
                        margin: 20px 0;
                        padding-left: 20px;
                    }
                    ul.timelinep > li:before {
                        content: ' ';
                        background: white;
                        display: inline-block;
                        position: absolute;
                        border-radius: 50%;
                        border: 4px solid green;
                        left: 20px;
                        width: 20px;
                        height: 20px;
                        z-index: 400;
                    }
                  </style>
              <div class="col-md-12 ">
                <h4 class="text-center"><b>Linha do Tempo de Evoluções</b></h4>
                <ul class="timelinep">
                  {% for ev in evolucao %} 
                  <li>
                    <a href="#"class="pull-left text-info">Evolução dia {{ev.data|date:'d/m/Y'}}</a> 
                    <a href="#"class="float-right text-info">{{ev.hora_inicio}}:00 até {{ev.hora_fim}}:00</a><br>
                    <b class="pull-left">Fisioterapeuta:</b> <b class="pull-right">{{ev.profissional}}</b><br>
                    <b class="pull-left">Convênio:</b> <b class="pull-right">{{ev.convenio}}</b> <br>
                    <b class="pull-left">Evolução:</b> <b class="pull-right">{{ev.evolucao}}</b><br>
                    <b class="pull-left">Procedimentos:</b> <b class="pull-right">{{ev.procedimento}}</b> <br>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
            </div>
                </div>
                  <div class="tab-pane active" id="timeline">
                    <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                    <thead class=" text-primary">
                        <th class="text-center">#</th>
                        <th>Tipo</th>
                        <th>Data</th>
                        <th>Profissional</th>
                        <th class="text-right">Horário</th>
                        <th >Ações</th>
                      </thead>
                       <tbody>
                       {% for atend in atendimentos %}
                         <tr>
                            <td class="text-center">{{forloop.counter}}</td>
                            {% if atend.tipo == 'AV' %}
                                <td width="18%">
                                  <div style="background-color:#1874CD;text-align:center;color:white;border-radius: 5px 5px;"><font size="2">{{atend.get_tipo_display}}</font>
                                  </div>
                                </td>
                                {% else %}
                                  <td width="18%">
                                    <div style="background-color:green;text-align:center;color:white;border-radius: 5px 5px;"><font size="2">{{atend.get_tipo_display}}</font>
                                    </div>
                                  </td>
                                {% endif %}
                            <td>{{atend.data|date:"d/m/Y"}}</td>
                            <td>{{atend.profissional}}</td>
                            <td class="text-right">{{atend.hora_inicio}}h - {{atend.hora_fim}}h</td>
                            <td>
                                <a class="btn btn-success btn-round btn-fab btn-fab-mini"href="">
                                <i class="material-icons">info</i>
                            </td>
                          </tr>
                        {% endfor %}
                          </tbody>
                          </table>
                        </div>
                        <div class="tab-pane" id="prontuario">
                          <div class="box box-info">
                          <div class="box-body box-profile">
                            <ul class="list-group list-group-unbordered">
                              <li class="list-group-item">
                                <b>Agendamentos Total</b> <span class="pull-right">{{agendamentos.count}}</span>
                              </li>
                              <li class="list-group-item">
                                <b>Avaliações</b> <span class="pull-right">{{avaliacao}}</span>
                              </li>
                              <li class="list-group-item">
                                <b>Evoluções</b> <span class="pull-right">{{evolucao.count}}</span>
                              </li>                               
                                <li class="list-group-item">
                                  <b>Atendido Total</b> <span class="pull-right">{{atendimentos.count}}</span>
                                </li>
                              </ul>
                            </div>
                          </div>
                      </div>
                        <div class="tab-pane" id="dados">
                          <div class="box box-primary">
                        <div class="box-header with-border">
                          <h3 class="box-title">Sobre o paciente</h3>
                        </div>
                        <div class="box-body">
                          <div class="box-body box-profile">
                            <ul class="list-group list-group-unbordered">
                              <li class="list-group-item">
                                <strong><i class="fa fa-mars margin-r-5"></i> Sexo</strong> <span class="pull-right">{{paciente.get_sexo_display}}</span>
                              </li>
                              <li class="list-group-item">
                                 <strong><i class="fa fa-map-marker margin-r-5"></i> Endereço</strong><span class="pull-right">{{paciente.endereco}}- Parnaíba/PI</span>
                              </li>
                              <li class="list-group-item">
                                <strong><i class="fa fa-map-marker margin-r-5"></i> CEP</strong> <span class="pull-right">{{paciente.cep}}</span>
                              </li>
                               <li class="list-group-item">
                                  <strong><i class="fa fa-heart margin-r-5"></i> Estado civil</strong><span class="pull-right">{{paciente.get_estado_civil_display}}</span>
                                </li>
                                <li class="list-group-item">
                                  <strong><i class="fa fa-globe margin-r-5"></i> Estado </strong><span class="pull-right">{{paciente.uf}}</span>
                                </li>
                                <li class="list-group-item"> <strong><i class="fa fa-phone margin-r-5"></i> Telefone fixo</strong><span class="pull-right">{{paciente.telefone}}</span></li>
                                <li class="list-group-item"> <strong><i class="fa fa-envelope margin-r-5"></i> E-mail</strong><span class="pull-right">{{paciente.email}}</span></li>
                                <li class="list-group-item"><strong><i class="fa fa-credit-card margin-r-5"></i> CPF</strong><span class="pull-right">{{paciente.cpf}}</span></li>
                                <li class="list-group-item"> <strong><i class="fa fa-credit-card margin-r-5"></i> RG</strong><span class="pull-right">{{paciente.rg}}</span></li>
                                <li class="list-group-item">   <strong><i class="fa fa-user-md margin-r-5"></i> Convênio</strong><span class="pull-right">{{paciente.convenio}}</span></li>
                              </ul>
                            </div>
                        </div>
                      </div>
                      </div>
                    </div>
                    </div><!-- end content-->
                </div><!--  end card  -->
            </div> <!-- end col-md-12 -->
        </div> <!-- end row -->
  </div>
</div>
{% endblock container %}